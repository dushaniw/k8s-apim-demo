(this.webpackJsonp=this.webpackJsonp||[]).push([[2],{1668:function(e,a,t){"use strict";var n=t(1),l=t.n(n),s=t(317),i=t(4668),c=t(1695),r=t(69),o=t.n(r),m=t(1276),d=t.n(m),p=t(1737),u=t(1702),g=t(1703),y=t(1784),E=t(1781),h=t(4705),f=t(4644),b=t(1712),T=t(1957),A=t.n(T),C=t(1713),k=t(4640),S=t(4658),O=t(34),I=t(1710),v=t(1744),N=t(1516),P=t(1420),D=t.n(P),w=t(1955),K=t.n(w),M=t(1956),x=t.n(M),R=t(183),U=t(318),B=t(1172),j=t(1098);var L=Object(j.a)(e=>({centerItems:{margin:"auto"},tryoutHeading:{display:"block",fontWeight:400},menuItem:{color:e.palette.getContrastText(e.palette.background.paper)}}))(e=>{let{selectedApplication:a,selectedKeyType:t}=e;const{subscriptions:n,handleChanges:r,classes:o}=e,m=e=>{const{target:n}=e,{name:l,value:s}=n;switch(l){case"selectedApplication":a=s;break;case"selectedKeyType":t=s}r(e)};return l.a.createElement(l.a.Fragment,null,l.a.createElement(i.a,{x:12,md:6,className:o.centerItems},l.a.createElement(u.a,{fullWidth:!0,id:"selected-application",select:!0,label:l.a.createElement(s.a,{defaultMessage:"Applications",id:"Apis.Details.ApiConsole.SelectAppPanel.applications"}),value:a,name:"selectedApplication",onChange:m,SelectProps:n,helperText:l.a.createElement(s.a,{defaultMessage:"Subscribed applications",id:"Apis.Details.ApiConsole.SelectAppPanel.select.subscribed.application"}),margin:"normal",variant:"outlined"},n.map(e=>l.a.createElement(I.a,{value:e.applicationInfo.applicationId,key:e.applicationInfo.applicationId,className:o.menuItem},e.applicationInfo.name)))),l.a.createElement(i.a,{x:12,md:6,className:o.centerItems},l.a.createElement(c.a,{variant:"h6",component:"label",id:"key-type",color:"textSecondary",className:o.tryoutHeading},l.a.createElement(s.a,{id:"Apis.Details.ApiConsole.SelectAppPanel.select.key.type.heading",defaultMessage:"Key Type"})),l.a.createElement(g.a,{component:"fieldset"},l.a.createElement(y.a,{name:"selectedKeyType",value:t,onChange:m,"aria-labelledby":"key-type",row:!0},null!==n&&("UNBLOCKED"===n.find(e=>e.applicationId===a).status||"TIER_UPDATE_PENDING"===n.find(e=>e.applicationId===a).status)&&l.a.createElement(E.a,{value:"PRODUCTION",control:l.a.createElement(h.a,null),label:l.a.createElement(s.a,{id:"Apis.Details.ApiConsole.SelectAppPanel.production.radio",defaultMessage:"Production"})}),l.a.createElement(E.a,{value:"SANDBOX",control:l.a.createElement(h.a,null),label:l.a.createElement(s.a,{id:"Apis.Details.ApiConsole.SelectAppPanel.sandbox.radio",defaultMessage:"Sandbox"})})))))});const H=Object(p.a)(e=>({centerItems:{margin:"auto"},tokenType:{margin:"auto",display:"flex","& .MuiButton-contained.Mui-disabled span.MuiButton-label":{color:"#999999"}},paper:{margin:e.spacing(1),padding:e.spacing(1)},grid:{marginTop:e.spacing(4),marginBottom:e.spacing(4),paddingRight:e.spacing(2),justifyContent:"center"},tryoutHeading:{fontWeight:400,display:"block"},genKeyButton:{width:e.spacing(20),height:e.spacing(5),marginTop:e.spacing(2.5),marginLeft:e.spacing(2)},gatewayEnvironment:{marginTop:e.spacing(4)},categoryHeading:{marginBottom:e.spacing(2),marginLeft:e.spacing(-5)},tooltip:{marginLeft:e.spacing(1)},menuItem:{color:e.palette.getContrastText(e.palette.background.paper)},warningIcon:{color:"#ff9a00",fontSize:25,marginRight:10}}));function _(e){const{securitySchemeType:a,selectedEnvironment:t,environments:r,productionAccessToken:o,sandboxAccessToken:m,selectedKeyType:d,setKeys:p,setSelectedKeyType:T,setSelectedKeyManager:P,setSelectedEnvironment:w,setProductionAccessToken:M,setSandboxAccessToken:j,scopes:_,setSecurityScheme:Y,setUsername:F,setPassword:W,username:G,password:X,updateSwagger:q,setProductionApiKey:z,setSandboxApiKey:$,productionApiKey:J,sandboxApiKey:Q,environmentObject:V,setURLs:Z,api:ee}=e;let{selectedKeyManager:ae}=e;ae=ae||"Resident Key Manager";const te=H(),[ne,le]=Object(n.useState)(!1),[se,ie]=Object(n.useState)(!1),[ce,re]=Object(n.useState)(!1),[oe,me]=Object(n.useState)(!1),[de,pe]=Object(n.useState)([]),[ue,ge]=Object(n.useState)([]),[ye,Ee]=Object(n.useState)([]),[he,fe]=Object(n.useState)(null),[be,Te]=Object(n.useState)(!1),Ae=ee.id,Ce=new U.a;function ke(e){const{target:t}=e,{name:n,value:l}=t;switch(n){case"selectedEnvironment":if(w(l,!0),"GRAPHQL"!==ee.type&&q(l),V){const e=V.find(e=>l===e.environmentName).URLs;Z(e)}break;case"selectedApplication":M(""),j(""),z(""),$(""),ge(l);break;case"selectedKeyManager":P(l,!0,ue);break;case"selectedKeyType":T(l,!o||!m,ue);break;case"securityScheme":Y(l);break;case"username":F(l);break;case"password":W(l);break;case"accessToken":"API-KEY"===a&&"PRODUCTION"===d?z(l):"API-KEY"===a&&"SANDBOX"===d?$(l):"PRODUCTION"===d?M(l):j(l)}}Object(n.useEffect)(()=>{let e,a,n,l="PRODUCTION";if(ee.lifeCycleStatus&&"prototyped"!==ee.lifeCycleStatus.toLowerCase()){Ce.getSubscriptions(Ae).then(s=>{null!==s?(e=s.obj.list.filter(e=>"UNBLOCKED"===e.status||"PROD_ONLY_BLOCKED"===e.status||"TIER_UPDATE_PENDING"===e.status),e&&e.length>0?(a=e[0].applicationId,B.a.get(a).then(e=>e.getKeys()).then(s=>{s.get(ae)&&"SANDBOX"===s.get(ae).keyType?(l="SANDBOX",({accessToken:n}=s.get(ae).token)):s.get(ae)&&"PRODUCTION"===s.get(ae).keyType&&(l="PRODUCTION",({accessToken:n}=s.get(ae).token)),ge(a),pe(e),p(s),w(t,!1),T(l,!1),"PRODUCTION"===d?M(n):j(n)})):(ge(a),pe(e),p(void 0),w(t,!1),"PRODUCTION"===d?M(n):j(n),T(d,!1))):(ge(a),pe(e),p(void 0),w(t,!1),"PRODUCTION"===d?M(n):j(n),T(d,!1))}).catch(e=>{const{status:a}=e;404===a&&me(!0)});Ce.getKeyManagers().then(e=>{const a=[];e.body.list.map(e=>a.push(e)),Ee(a);const t=a.filter(e=>e.name===ae);t&&t.length>0&&fe(t[0])}).catch(e=>{const{status:a}=e;404===a&&me(!0)})}},[]),Object(n.useEffect)(()=>{!function(){if(ee.lifeCycleStatus&&"prototyped"!==ee.lifeCycleStatus.toLowerCase()){let e,a;null!==de&&0!==de.length&&0!==ue.length&&("PROD_ONLY_BLOCKED"===de.find(e=>e.applicationId===ue).status?(T(d,!1),a="SANDBOX"):a=d),B.a.get(ue).then(e=>e.getKeys(a||"PRODUCTION")).then(a=>{const t=a.get(ae);t&&t.keyType===d&&({accessToken:e}=t.token),t&&"PRODUCTION"===t.keyType?M(e):t&&"SANDBOX"===t.keyType&&j(e),t&&t.consumerKey&&""!==t.consumerKey?Te(!0):Te(!1),p(a)})}}()},[ue,d,t,a]);const Se=O.a.getUser();if(null==ee)return l.a.createElement(R.a,null);if(oe)return"API Not found !";let Oe=!1,Ie=!1,ve=!1,Ne=!1,Pe=ee.authorizationHeader?ee.authorizationHeader:"Authorization",De="Bearer";ee&&ee.securityScheme&&(Oe=ee.securityScheme.includes("api_key"),Ie=ee.securityScheme.includes("basic_auth"),ve=ee.securityScheme.includes("oauth2"),Ne=ee.securityScheme.includes("test_auth"),Oe&&"API-KEY"===a&&(Pe="apikey",De=""),Ne&&"TEST"===a&&(Pe="testKey",De=""));const we=ee.lifeCycleStatus&&"prototyped"===ee.lifeCycleStatus.toLowerCase(),Ke="published"===ee.lifeCycleStatus.toLowerCase()||we;let Me="";Me="API-KEY"===a?"PRODUCTION"===d?J:Q:"PRODUCTION"===d?o:m;const xe=`${Pe}: ${De}`;return l.a.createElement(l.a.Fragment,null,l.a.createElement(i.a,{x:12,md:6,className:te.centerItems},l.a.createElement(N.a,null,"TEST"!==a&&l.a.createElement(l.a.Fragment,null,l.a.createElement(N.a,{mb:1},l.a.createElement(c.a,{variant:"body1"},l.a.createElement(N.a,{display:"flex",alignItems:"center"},ye.length>1&&he&&he.enabled&&l.a.createElement(s.a,{id:"Apis.Details.ApiConsole.TryOutController.default.km.msg.one",defaultMessage:"The Resident Key Manager is selected for try out console."}),he&&!he.enabled&&l.a.createElement(l.a.Fragment,null,l.a.createElement(D.a,{className:te.warningIcon}),l.a.createElement("div",null,l.a.createElement(s.a,{id:"Apis.Details.ApiConsole.TryOutController.default.km.msg.two",defaultMessage:"Try it console is only accessible via the default key manager.But the default key manager is disabled at the moment."}))),he&&0===he.length&&l.a.createElement(s.a,{id:"Apis.Details.ApiConsole.TryOutController.default.km.msg.three",defaultMessage:"Try it console is only accessible via the default key manager.Something went wrong while selecting the default Key manager."}))))),(Oe||Ie||ve)&&Ke&&l.a.createElement(l.a.Fragment,null,l.a.createElement(c.a,{variant:"h5",component:"h2",color:"textPrimary",className:te.categoryHeading},l.a.createElement(s.a,{id:"api.console.security.heading",defaultMessage:"Security"})),l.a.createElement(c.a,{variant:"h6",component:"label",id:"security-type",color:"textSecondary",className:te.tryoutHeading},l.a.createElement(s.a,{id:"api.console.security.type.heading",defaultMessage:"Security Type"})),l.a.createElement(g.a,{component:"fieldset"},l.a.createElement(y.a,{name:"securityScheme",value:a,onChange:ke,"aria-labelledby":"security-type",row:!0},l.a.createElement(E.a,{value:"OAUTH",disabled:!ve,control:l.a.createElement(h.a,null),label:l.a.createElement(s.a,{id:"Apis.Details.ApiConsole.security.scheme.oauth",defaultMessage:"OAuth"})}),l.a.createElement(E.a,{value:"API-KEY",disabled:!Oe,control:l.a.createElement(h.a,null),label:l.a.createElement(s.a,{id:"Apis.Details.ApiConsole.security.scheme.apikey",defaultMessage:"API Key"})}),l.a.createElement(E.a,{value:"BASIC",disabled:!Ie,control:l.a.createElement(h.a,null),label:l.a.createElement(s.a,{id:"Apis.Details.ApiConsole.security.scheme.basic",defaultMessage:"Basic"})})))))),!we&&l.a.createElement(i.a,{xs:12,md:12,item:!0},l.a.createElement(N.a,{display:"block"},Se&&de&&de.length>0&&"BASIC"!==a&&"TEST"!==a&&l.a.createElement(L,{subscriptions:de,handleChanges:ke,selectedApplication:ue,selectedKeyManager:ae,selectedKeyType:d,keyManagers:ye}),de&&0===de.length&&"TEST"!==a?l.a.createElement(i.a,{x:8,md:6,className:te.tokenType,item:!0},l.a.createElement(N.a,{mb:1,alignItems:"center"},l.a.createElement(c.a,{variant:"body1"},l.a.createElement(N.a,{display:"flex"},l.a.createElement(D.a,{className:te.warningIcon}),l.a.createElement("div",null,l.a.createElement(s.a,{id:"Apis.Details.ApiConsole.ApiConsole.subscribe.to.application",defaultMessage:"Please subscribe to an application"})))))):!be&&"OAUTH"===a&&l.a.createElement(i.a,{x:8,md:6,className:te.tokenType,item:!0},l.a.createElement(N.a,{mb:1,alignItems:"center"},l.a.createElement(c.a,{variant:"body1"},l.a.createElement(N.a,{display:"flex"},l.a.createElement(D.a,{className:te.warningIcon}),l.a.createElement("div",null,l.a.createElement(s.a,{id:"Apis.Details.ApiConsole.ApiConsole.keys.not.generated",defaultMessage:"Consumer key and secret not generated for the selected application on the {what} environment. ",values:{what:d}})))))),l.a.createElement(N.a,{display:"block",justifyContent:"center"},l.a.createElement(i.a,{x:8,md:6,className:te.tokenType,item:!0},"BASIC"===a&&l.a.createElement(l.a.Fragment,null,l.a.createElement(i.a,{x:12,md:12,item:!0},l.a.createElement(u.a,{margin:"normal",variant:"outlined",id:"username",label:l.a.createElement(s.a,{id:"username",defaultMessage:"Username"}),name:"username",onChange:ke,value:G||"",fullWidth:!0}),l.a.createElement(u.a,{margin:"normal",variant:"outlined",id:"input-password",label:l.a.createElement(s.a,{id:"password",defaultMessage:"Password"}),name:"password",onChange:ke,type:se?"text":"password",value:X||"",fullWidth:!0,InputProps:{autoComplete:"new-password",endAdornment:l.a.createElement(k.a,{position:"end"},l.a.createElement(C.a,{edge:"end","aria-label":"toggle password visibility",onClick:()=>ie(!se)},se?l.a.createElement(K.a,null):l.a.createElement(x.a,null)))}}))),"BASIC"!==a&&"TEST"!==a&&l.a.createElement(u.a,{fullWidth:!0,margin:"normal",variant:"outlined",label:l.a.createElement(s.a,{id:"access.token",defaultMessage:"Access Token"}),name:"accessToken",onChange:ke,type:ne?"text":"password",value:Me||"",helperText:l.a.createElement(s.a,{id:"enter.access.token",defaultMessage:"Enter access Token"}),id:"accessTokenInput",InputProps:{autoComplete:"new-password",endAdornment:l.a.createElement(k.a,{position:"end"},l.a.createElement(C.a,{edge:"end","aria-label":"Toggle token visibility",onClick:function(){le(!ne)}},ne?l.a.createElement(S.a,null,"visibility_off"):l.a.createElement(S.a,null,"visibility"))),startAdornment:l.a.createElement(k.a,{style:{minWidth:7*xe.length},position:"start"},`${Pe}: ${De}`)}}),"BASIC"!==a&&"TEST"!==a&&l.a.createElement(l.a.Fragment,null,l.a.createElement(v.a,{onClick:"API-KEY"===a?function(){if(ee.lifeCycleStatus&&"prototyped"!==ee.lifeCycleStatus.toLowerCase()){re(!0);Ce.generateApiKey(ue,d,-1).then(e=>{console.log("Non empty response received",e),le(!1),"PRODUCTION"===d?z(e.body.apikey):$(e.body.apikey),re(!1)}).catch(e=>{console.log(e);const{status:a}=e;404===a&&me(!0),re(!1)})}}:function(){if(ee.lifeCycleStatus&&"prototyped"!==ee.lifeCycleStatus.toLowerCase()){re(!0);B.a.get(ue).then(e=>e.generateToken(ae,d,3600,_)).then(e=>{console.log("token generated successfully "+e),le(!1),"PRODUCTION"===d?M(e.accessToken):j(e.accessToken),re(!1)}).catch(e=>{console.error(e);const{status:a}=e;404===a&&me(!0),re(!1)})}},variant:"contained",className:te.genKeyButton,disabled:!Se||de&&0===de.length||!be&&"OAUTH"===a},ce&&l.a.createElement(f.a,{size:15}),l.a.createElement(s.a,{id:"Apis.Details.ApiCOnsole.generate.test.key",defaultMessage:"GET TEST KEY "})),l.a.createElement(b.a,{placement:"right",interactive:!0,title:l.a.createElement(s.a,{id:"Apis.Details.TryOutConsole.access.token.tooltip",defaultMessage:"You can use your existing Access Token or you can generate a new Test Key."})},l.a.createElement(N.a,{m:1,mt:2},l.a.createElement(C.a,{"aria-label":"Use existing Access Token or generate a new Test Key"},l.a.createElement(A.a,null))))))),l.a.createElement(N.a,{display:"flex",justifyContent:"center",className:te.gatewayEnvironment},l.a.createElement(i.a,{xs:12,md:6,item:!0},r&&r.length>0&&l.a.createElement(l.a.Fragment,null,l.a.createElement(c.a,{variant:"h5",component:"h3",color:"textPrimary",className:te.categoryHeading},l.a.createElement(s.a,{id:"api.console.gateway.heading",defaultMessage:"Gateway"})),l.a.createElement(u.a,{fullWidth:!0,select:!0,id:"environment",label:l.a.createElement(s.a,{defaultMessage:"Environment",id:"Apis.Details.ApiConsole.environment"}),value:t||r&&r[0].name,name:"selectedEnvironment",onChange:ke,helperText:l.a.createElement(s.a,{defaultMessage:"Please select an environment",id:"Apis.Details.ApiConsole.SelectAppPanel.environment"}),margin:"normal",variant:"outlined"},r&&r.length>0&&l.a.createElement(I.a,{value:"",disabled:!0,className:te.menuItem},l.a.createElement("em",null,l.a.createElement(s.a,{id:"api.gateways",defaultMessage:"API Gateways"}))),r&&r.map(e=>l.a.createElement(I.a,{value:e.name,key:e.name,className:te.menuItem},e.displayName)))))))))}_.propTypes={classes:o.a.shape({paper:o.a.string.isRequired,grid:o.a.string.isRequired,inputAdornmentStart:o.a.string.isRequired,centerItems:o.a.string.isRequired}).isRequired};a.a=d()(p.a)(_)}}]);
//# sourceMappingURL=2.4ebfb27af1d006b1cb62.bundle.js.map