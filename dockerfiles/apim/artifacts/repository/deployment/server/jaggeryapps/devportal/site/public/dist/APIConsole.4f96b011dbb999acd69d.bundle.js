(this.webpackJsonp=this.webpackJsonp||[]).push([[10],{1817:function(e,t){},1819:function(e,t){},1820:function(e,t){},1821:function(e,t){},1831:function(e,t){},2313:function(e,t){},3718:function(e,t){},3720:function(e,t){},3729:function(e,t){},3731:function(e,t){},3756:function(e,t){},3758:function(e,t){},3759:function(e,t){},3764:function(e,t){},3766:function(e,t){},3772:function(e,t){},3774:function(e,t){},3793:function(e,t){},3805:function(e,t){},3808:function(e,t){},4717:function(e,t,s){"use strict";s.r(t);var n=s(1),i=s.n(n),a=s(317),o=s(4668),c=s(1695),r=s(69),d=s.n(r),p=s(1098),u=s(4658),l=s(34),h=s(1708),y=s(1744),g=s(2257),m=s.n(g),S=s(2258),T=s.n(S),A=s(2259),b=s(1342),f=s.n(b),P=s(2260),k=s.n(P),K=s(3812),w=s.n(K),E=s(1121),v=s(183),I=s(318),O=(s(3869),s(3871)),x=s.n(O);const C=function(){return{wrapComponents:{info:()=>()=>null,authorizeBtn:()=>()=>null}}},R=e=>{const{spec:t,accessTokenProvider:s,authorizationHeader:n,api:a,securitySchemeType:o}=e,c={spec:t,validatorUrl:null,defaultModelsExpandDepth:-1,docExpansion:"list",requestInterceptor:e=>{const{url:t}=e,{context:i}=a,c=i+"/*";if(e.headers[n]="apikey"===n?s():"BASIC"===o?"Basic "+s():"TEST"===o?s():"Bearer "+s(),t.endsWith(c))e.url=t.substring(0,t.length-2);else if(t.includes(c+"?")){const s=t.split("/*?");e.url=s.length>1?s[0]+"?"+s[1]:s[0]}return e},defaultModelExpandDepth:-1,plugins:[C]};return i.a.createElement(x.a,c)};R.propTypes={accessTokenProvider:d.a.func.isRequired,authorizationHeader:d.a.string.isRequired,api:d.a.shape({context:d.a.string.isRequired}).isRequired,spec:d.a.string.isRequired};var N=R,U=s(1668),j=s(1172);function M(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function D(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class q extends i.a.Component{constructor(e){super(e),this.state={securitySchemeType:"OAUTH",username:"",password:"",scopes:[],selectedKeyType:"PRODUCTION",keys:[],productionApiKey:"",sandboxApiKey:"",selectedKeyManager:"Resident Key Manager"},this.accessTokenProvider=this.accessTokenProvider.bind(this),this.updateSwagger=this.updateSwagger.bind(this),this.setSecurityScheme=this.setSecurityScheme.bind(this),this.setSelectedEnvironment=this.setSelectedEnvironment.bind(this),this.setProductionAccessToken=this.setProductionAccessToken.bind(this),this.setSandboxAccessToken=this.setSandboxAccessToken.bind(this),this.setUsername=this.setUsername.bind(this),this.setPassword=this.setPassword.bind(this),this.setSelectedKeyType=this.setSelectedKeyType.bind(this),this.setSectedKeyManager=this.setSelectedKeyManager.bind(this),this.setKeys=this.setKeys.bind(this),this.updateAccessToken=this.updateAccessToken.bind(this),this.setProductionApiKey=this.setProductionApiKey.bind(this),this.setSandboxApiKey=this.setSandboxApiKey.bind(this),this.converttopostman=this.convertToPostman.bind(this)}componentDidMount(){const{api:e}=this.context,t=e.id,s=l.a.getUser();let n,i,a,o;this.apiClient=new I.a;this.apiClient.getAPIById(t).then(e=>{if(n=e.obj,n.endpointURLs&&(i=n.endpointURLs.map(e=>({name:e.environmentName,displayName:e.environmentDisplayName}))),n.scopes){const e=n.scopes.map(e=>e.key);this.setState({scopes:e})}return i&&i.length>0?(a=i[0].name,this.apiClient.getSwaggerByAPIIdAndEnvironment(t,a)):this.apiClient.getSwaggerByAPIId(t)}).then(e=>{o=e.obj;let c="OAUTH";return n.securityScheme.includes("oauth2")||(c=n.securityScheme.includes("api_key")?"API-KEY":"BASIC"),this.setState({api:n,swagger:o,environments:i,productionAccessToken:void 0,sandboxAccessToken:void 0,selectedEnvironment:a,securitySchemeType:c}),null!=s?this.apiClient.getSubscriptions(t):null}).catch(e=>{const{status:t}=e;404===t&&this.setState({notFound:!0})})}setSecurityScheme(e){this.setState({securitySchemeType:e})}setSelectedEnvironment(e){this.setState({selectedEnvironment:e})}setProductionAccessToken(e){this.setState({productionAccessToken:e})}setSandboxAccessToken(e){this.setState({sandboxAccessToken:e})}setProductionApiKey(e){this.setState({productionApiKey:e})}setSandboxApiKey(e){this.setState({sandboxApiKey:e})}setUsername(e){this.setState({username:e})}setPassword(e){this.setState({password:e})}setSelectedKeyType(e,t,s){t?this.setState({selectedKeyType:e},this.updateAccessToken(s)):this.setState({selectedKeyType:e})}setSelectedKeyManager(e,t,s){t?this.setState({selectedKeyManager:e},this.updateAccessToken(s)):this.setState({selectedKeyManager:e})}setKeys(e){this.setState({keys:e})}convertToPostman(e){k.a.convert({type:"string",data:e},{},(t,s)=>{if(s.result)f()(JSON.stringify(s.output[0].data),"postman collection");else{const t=w.a.convert(e);t?f()(JSON.stringify(t),"postman collection"):console.log("Could not convert")}})}updateAccessToken(e){const{selectedKeyType:t,selectedKeyManager:s,keys:n}=this.state;let i;n.get(s)&&n.get(s).keyType===t?(({accessToken:i}=n.get(s).token),"PRODUCTION"===t?this.setProductionAccessToken(i):this.setSandboxAccessToken(i)):j.a.get(e).then(e=>e.getKeys(t)).then(e=>{e.get(s)&&e.get(s).keyType===t&&({accessToken:i}=e.get(s).token),"PRODUCTION"===e.get(s).keyType?this.setProductionAccessToken(i):this.setSandboxAccessToken(i),this.setKeys(e)})}accessTokenProvider(){const{securitySchemeType:e,username:t,password:s,productionAccessToken:n,sandboxAccessToken:i,selectedKeyType:a,productionApiKey:o,sandboxApiKey:c}=this.state;if("BASIC"===e){return btoa(t+":"+s)}return"API-KEY"===e?"PRODUCTION"===a?o:c:"PRODUCTION"===a?n:i}updateSwagger(e){const{api:t,environments:s}=this.state;let n;n=e&&s.find(t=>t.name===e)?this.apiClient.getSwaggerByAPIIdAndEnvironment(t.id,e):this.apiClient.getSwaggerByAPIId(t.id),n.then(e=>{this.setState({swagger:e.obj})})}render(){const{classes:e}=this.props,{api:t,notFound:s,swagger:n,securitySchemeType:r,selectedEnvironment:d,environments:p,scopes:g,username:S,password:b,productionAccessToken:f,sandboxAccessToken:P,selectedKeyType:k,sandboxApiKey:K,productionApiKey:w,selectedKeyManager:E}=this.state,I=l.a.getUser(),O=JSON.stringify(function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?M(Object(s),!0).forEach((function(t){D(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):M(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},n)),x="data:text/json;charset=utf-8, "+encodeURIComponent(O);if(null==t||null==n)return i.a.createElement(v.a,null);if(s)return"API Not found !";let C=!1,R=t.authorizationHeader?t.authorizationHeader:"Authorization";t&&t.securityScheme&&(C=t.securityScheme.includes("api_key"),C&&"API-KEY"===r&&(R="apikey"));const j=t.lifeCycleStatus&&"prototyped"===t.lifeCycleStatus.toLowerCase();return i.a.createElement(i.a.Fragment,null,i.a.createElement(h.a,{className:e.paper},i.a.createElement(o.a,{container:!0,className:e.grid},!j&&!I&&i.a.createElement(o.a,{item:!0,md:6},i.a.createElement(h.a,{className:e.userNotificationPaper},i.a.createElement(c.a,{variant:"h5",component:"h3"},i.a.createElement(u.a,null,"warning")," ",i.a.createElement(a.a,{id:"notice",defaultMessage:"Notice"})),i.a.createElement(c.a,{component:"p"},i.a.createElement(a.a,{id:"api.console.require.access.token",defaultMessage:"You need an access token to try the API. Please log in and subscribe to the API to generate an access token. If you already have an access token, please provide it below."}))))),i.a.createElement(U.a,{setSecurityScheme:this.setSecurityScheme,securitySchemeType:r,setSelectedEnvironment:this.setSelectedEnvironment,selectedEnvironment:d,productionAccessToken:f,setProductionAccessToken:this.setProductionAccessToken,sandboxAccessToken:P,setSandboxAccessToken:this.setSandboxAccessToken,swagger:n,environments:p,scopes:g,setUsername:this.setUsername,setPassword:this.setPassword,username:S,password:b,setSelectedKeyType:this.setSelectedKeyType,selectedKeyType:k,setSelectedKeyManager:this.setSelectedKeyManager,selectedKeyManager:E,updateSwagger:this.updateSwagger,setKeys:this.setKeys,setProductionApiKey:this.setProductionApiKey,setSandboxApiKey:this.setSandboxApiKey,productionApiKey:w,sandboxApiKey:K,api:this.state.api}),"SOAP"!==t.type&&i.a.createElement(o.a,{container:!0},i.a.createElement(o.a,{xs:8,item:!0}),i.a.createElement(o.a,{xs:2,item:!0},i.a.createElement(y.a,{size:"small",onClick:()=>this.convertToPostman(O)},i.a.createElement(A.Icon,{icon:m.a,width:30,height:30,className:e.buttonIcon}),i.a.createElement(a.a,{id:"Apis.Details.APIConsole.APIConsole.download.postman",defaultMessage:"Postman collection"}))),i.a.createElement(o.a,{xs:2,item:!0},i.a.createElement("a",{href:x,download:"swagger.json"},i.a.createElement(y.a,{size:"small"},i.a.createElement(A.Icon,{icon:T.a,width:30,height:30,className:e.buttonIcon}),i.a.createElement(a.a,{id:"Apis.Details.APIConsole.APIConsole.download.swagger",defaultMessage:"OpenAPI"})))))),i.a.createElement(h.a,{className:e.swaggerUIPaper},i.a.createElement(N,{api:this.state.api,accessTokenProvider:this.accessTokenProvider,spec:n,authorizationHeader:R,securitySchemeType:r})))}}q.propTypes={classes:d.a.shape({paper:d.a.string.isRequired,titleSub:d.a.string.isRequired,grid:d.a.string.isRequired,userNotificationPaper:d.a.string.isRequired,buttonIcon:d.a.string.isRequired,iconify:d.a.string.isRequired}).isRequired},q.contextType=E.a;t.default=Object(p.a)(e=>({iconify:{marginRight:10,font:24},buttonIcon:{marginRight:10},paper:{margin:e.spacing(1),padding:e.spacing(1)},grid:{marginTop:e.spacing(4),marginBottom:e.spacing(4),paddingRight:e.spacing(2),justifyContent:"center"},userNotificationPaper:{padding:e.spacing(2)},titleSub:{marginLeft:e.spacing(2),paddingTop:e.spacing(2),paddingBottom:e.spacing(2),color:e.palette.getContrastText(e.palette.background.default)},swaggerUIPaper:{backgroundColor:e.custom.apiDetailPages.swaggerUIBackground}}))(q)}}]);
//# sourceMappingURL=APIConsole.4f96b011dbb999acd69d.bundle.js.map