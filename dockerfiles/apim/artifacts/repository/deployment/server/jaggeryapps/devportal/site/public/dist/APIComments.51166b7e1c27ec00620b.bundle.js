(this.webpackJsonp=this.webpackJsonp||[]).push([[3],{1547:function(e,t,n){e.exports=function(){"use strict";var e="millisecond",t="second",n="minute",a="hour",i="day",s="week",o="month",r="quarter",l="year",m="date",c=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,d=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,h={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},p=function(e,t,n){var a=String(e);return!a||a.length>=t?e:""+Array(t+1-a.length).join(n)+e},u={s:p,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),a=Math.floor(n/60),i=n%60;return(t<=0?"+":"-")+p(a,2,"0")+":"+p(i,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var a=12*(n.year()-t.year())+(n.month()-t.month()),i=t.clone().add(a,o),s=n-i<0,r=t.clone().add(a+(s?-1:1),o);return+(-(a+(n-i)/(s?i-r:r-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(c){return{M:o,y:l,w:s,d:i,D:m,h:a,m:n,s:t,ms:e,Q:r}[c]||String(c||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},g="en",f={};f[g]=h;var C=function(e){return e instanceof v},y=function(e,t,n){var a;if(!e)return g;if("string"==typeof e)f[e]&&(a=e),t&&(f[e]=t,a=e);else{var i=e.name;f[i]=e,a=i}return!n&&a&&(g=a),a||!n&&g},b=function(e,t){if(C(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new v(n)},w=u;w.l=y,w.i=C,w.w=function(e,t){return b(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var v=function(){function h(e){this.$L=y(e.locale,null,!0),this.parse(e)}var p=h.prototype;return p.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(w.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var a=t.match(c);if(a){var i=a[2]-1||0,s=(a[7]||"0").substring(0,3);return n?new Date(Date.UTC(a[1],i,a[3]||1,a[4]||0,a[5]||0,a[6]||0,s)):new Date(a[1],i,a[3]||1,a[4]||0,a[5]||0,a[6]||0,s)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},p.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},p.$utils=function(){return w},p.isValid=function(){return!("Invalid Date"===this.$d.toString())},p.isSame=function(e,t){var n=b(e);return this.startOf(t)<=n&&n<=this.endOf(t)},p.isAfter=function(e,t){return b(e)<this.startOf(t)},p.isBefore=function(e,t){return this.endOf(t)<b(e)},p.$g=function(e,t,n){return w.u(e)?this[t]:this.set(n,e)},p.unix=function(){return Math.floor(this.valueOf()/1e3)},p.valueOf=function(){return this.$d.getTime()},p.startOf=function(e,r){var c=this,d=!!w.u(r)||r,h=w.p(e),p=function(e,t){var n=w.w(c.$u?Date.UTC(c.$y,t,e):new Date(c.$y,t,e),c);return d?n:n.endOf(i)},u=function(e,t){return w.w(c.toDate()[e].apply(c.toDate("s"),(d?[0,0,0,0]:[23,59,59,999]).slice(t)),c)},g=this.$W,f=this.$M,C=this.$D,y="set"+(this.$u?"UTC":"");switch(h){case l:return d?p(1,0):p(31,11);case o:return d?p(1,f):p(0,f+1);case s:var b=this.$locale().weekStart||0,v=(g<b?g+7:g)-b;return p(d?C-v:C+(6-v),f);case i:case m:return u(y+"Hours",0);case a:return u(y+"Minutes",1);case n:return u(y+"Seconds",2);case t:return u(y+"Milliseconds",3);default:return this.clone()}},p.endOf=function(e){return this.startOf(e,!1)},p.$set=function(s,r){var c,d=w.p(s),h="set"+(this.$u?"UTC":""),p=(c={},c[i]=h+"Date",c[m]=h+"Date",c[o]=h+"Month",c[l]=h+"FullYear",c[a]=h+"Hours",c[n]=h+"Minutes",c[t]=h+"Seconds",c[e]=h+"Milliseconds",c)[d],u=d===i?this.$D+(r-this.$W):r;if(d===o||d===l){var g=this.clone().set(m,1);g.$d[p](u),g.init(),this.$d=g.set(m,Math.min(this.$D,g.daysInMonth())).$d}else p&&this.$d[p](u);return this.init(),this},p.set=function(e,t){return this.clone().$set(e,t)},p.get=function(e){return this[w.p(e)]()},p.add=function(e,r){var m,c=this;e=Number(e);var d=w.p(r),h=function(t){var n=b(c);return w.w(n.date(n.date()+Math.round(t*e)),c)};if(d===o)return this.set(o,this.$M+e);if(d===l)return this.set(l,this.$y+e);if(d===i)return h(1);if(d===s)return h(7);var p=(m={},m[n]=6e4,m[a]=36e5,m[t]=1e3,m)[d]||1,u=this.$d.getTime()+e*p;return w.w(u,this)},p.subtract=function(e,t){return this.add(-1*e,t)},p.format=function(e){var t=this;if(!this.isValid())return"Invalid Date";var n=e||"YYYY-MM-DDTHH:mm:ssZ",a=w.z(this),i=this.$locale(),s=this.$H,o=this.$m,r=this.$M,l=i.weekdays,m=i.months,c=function(e,a,i,s){return e&&(e[a]||e(t,n))||i[a].substr(0,s)},h=function(e){return w.s(s%12||12,e,"0")},p=i.meridiem||function(e,t,n){var a=e<12?"AM":"PM";return n?a.toLowerCase():a},u={YY:String(this.$y).slice(-2),YYYY:this.$y,M:r+1,MM:w.s(r+1,2,"0"),MMM:c(i.monthsShort,r,m,3),MMMM:c(m,r),D:this.$D,DD:w.s(this.$D,2,"0"),d:String(this.$W),dd:c(i.weekdaysMin,this.$W,l,2),ddd:c(i.weekdaysShort,this.$W,l,3),dddd:l[this.$W],H:String(s),HH:w.s(s,2,"0"),h:h(1),hh:h(2),a:p(s,o,!0),A:p(s,o,!1),m:String(o),mm:w.s(o,2,"0"),s:String(this.$s),ss:w.s(this.$s,2,"0"),SSS:w.s(this.$ms,3,"0"),Z:a};return n.replace(d,(function(e,t){return t||u[e]||a.replace(":","")}))},p.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},p.diff=function(e,m,c){var d,h=w.p(m),p=b(e),u=6e4*(p.utcOffset()-this.utcOffset()),g=this-p,f=w.m(this,p);return f=(d={},d[l]=f/12,d[o]=f,d[r]=f/3,d[s]=(g-u)/6048e5,d[i]=(g-u)/864e5,d[a]=g/36e5,d[n]=g/6e4,d[t]=g/1e3,d)[h]||g,c?f:w.a(f)},p.daysInMonth=function(){return this.endOf(o).$D},p.$locale=function(){return f[this.$L]},p.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),a=y(e,t,!0);return a&&(n.$L=a),n},p.clone=function(){return w.w(this.$d,this)},p.toDate=function(){return new Date(this.valueOf())},p.toJSON=function(){return this.isValid()?this.toISOString():null},p.toISOString=function(){return this.$d.toISOString()},p.toString=function(){return this.$d.toUTCString()},h}(),x=v.prototype;return b.prototype=x,[["$ms",e],["$s",t],["$m",n],["$H",a],["$W",i],["$M",o],["$y",l],["$D",m]].forEach((function(e){x[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),b.extend=function(e,t){return e.$i||(e(t,v,b),e.$i=!0),b},b.locale=y,b.isDayjs=C,b.unix=function(e){return b(1e3*e)},b.en=f[g],b.Ls=f,b.p={},b}()},1548:function(e,t,n){e.exports=function(){"use strict";return function(e,t,n){e=e||{};var a=t.prototype,i={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function s(e,t,n,i){return a.fromToBase(e,t,n,i)}n.en.relativeTime=i,a.fromToBase=function(t,a,s,o,r){for(var l,m,c,d=s.$locale().relativeTime||i,h=e.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],p=h.length,u=0;u<p;u+=1){var g=h[u];g.d&&(l=o?n(t).diff(s,g.d,!0):s.diff(t,g.d,!0));var f=(e.rounding||Math.round)(Math.abs(l));if(c=l>0,f<=g.r||!g.r){f<=1&&u>0&&(g=h[u-1]);var C=d[g.l];r&&(f=r(""+f)),m="string"==typeof C?C.replace("%d",f):C(f,a,g.l,c);break}}if(a)return m;var y=c?d.future:d.past;return"function"==typeof y?y(m):y.replace("%s",m)},a.to=function(e,t){return s(e,t,this,!0)},a.from=function(e,t){return s(e,t,this)};var o=function(e){return e.$u?n.utc():n()};a.toNow=function(e){return this.to(o(this),e)},a.fromNow=function(e){return this.from(o(this),e)}}}()},4435:function(e,t,n){"use strict";var a=n(1100);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(1)),s=(0,a(n(1102)).default)(i.default.createElement("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"AddCircleOutline");t.default=s},4436:function(e,t,n){"use strict";var a=n(1746),i=n(1100);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var s=i(n(1247)),o=i(n(1161)),r=a(n(1)),l=(i(n(69)),i(n(1097))),m=i(n(1276)),c=(i(n(4437)),[0,1,2,3,4,5,6,7,8,9,10]),d=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12];function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=parseFloat(e);return"".concat(n/t).concat(String(e).replace(String(n),"")||"px")}var p=function(e){return(0,o.default)((0,o.default)({root:{},container:{boxSizing:"border-box",display:"flex",flexWrap:"wrap",width:"100%"},item:{boxSizing:"border-box",margin:"0"},zeroMinWidth:{minWidth:0},"direction-xs-column":{flexDirection:"column"},"direction-xs-column-reverse":{flexDirection:"column-reverse"},"direction-xs-row-reverse":{flexDirection:"row-reverse"},"wrap-xs-nowrap":{flexWrap:"nowrap"},"wrap-xs-wrap-reverse":{flexWrap:"wrap-reverse"},"align-items-xs-center":{alignItems:"center"},"align-items-xs-flex-start":{alignItems:"flex-start"},"align-items-xs-flex-end":{alignItems:"flex-end"},"align-items-xs-baseline":{alignItems:"baseline"},"align-content-xs-center":{alignContent:"center"},"align-content-xs-flex-start":{alignContent:"flex-start"},"align-content-xs-flex-end":{alignContent:"flex-end"},"align-content-xs-space-between":{alignContent:"space-between"},"align-content-xs-space-around":{alignContent:"space-around"},"justify-xs-center":{justifyContent:"center"},"justify-xs-flex-end":{justifyContent:"flex-end"},"justify-xs-space-between":{justifyContent:"space-between"},"justify-xs-space-around":{justifyContent:"space-around"},"justify-xs-space-evenly":{justifyContent:"space-evenly"}},function(e,t){var n={};return c.forEach((function(a){var i=e.spacing(a);0!==i&&(n["spacing-".concat(t,"-").concat(a)]={margin:"-".concat(h(i,2)),width:"calc(100% + ".concat(h(i),")"),"& > $item":{padding:h(i,2)}})})),n}(e,"xs")),e.breakpoints.keys.reduce((function(t,n){return function(e,t,n){var a={};d.forEach((function(e){var t="grid-".concat(n,"-").concat(e);if(!0!==e)if("auto"!==e){var i="".concat(Math.round(e/12*1e8)/1e6,"%");a[t]={flexBasis:i,flexGrow:0,maxWidth:i}}else a[t]={flexBasis:"auto",flexGrow:0,maxWidth:"none"};else a[t]={flexBasis:0,flexGrow:1,maxWidth:"100%"}})),"xs"===n?(0,o.default)(e,a):e[t.breakpoints.up(n)]=a}(t,e,n),t}),{}))};t.styles=p;var u=r.forwardRef((function(e,t){var n=e.alignContent,a=void 0===n?"stretch":n,i=e.alignItems,m=void 0===i?"stretch":i,c=e.classes,d=e.className,h=e.component,p=void 0===h?"div":h,u=e.container,g=void 0!==u&&u,f=e.direction,C=void 0===f?"row":f,y=e.item,b=void 0!==y&&y,w=e.justify,v=void 0===w?"flex-start":w,x=e.lg,E=void 0!==x&&x,M=e.md,T=void 0!==M&&M,S=e.sm,k=void 0!==S&&S,D=e.spacing,O=void 0===D?0:D,A=e.wrap,R=void 0===A?"wrap":A,$=e.xl,I=void 0!==$&&$,N=e.xs,W=void 0!==N&&N,j=e.zeroMinWidth,L=void 0!==j&&j,q=(0,s.default)(e,["alignContent","alignItems","classes","className","component","container","direction","item","justify","lg","md","sm","spacing","wrap","xl","xs","zeroMinWidth"]),U=(0,l.default)(c.root,d,g&&[c.container,0!==O&&c["spacing-xs-".concat(String(O))]],b&&c.item,L&&c.zeroMinWidth,"row"!==C&&c["direction-xs-".concat(String(C))],"wrap"!==R&&c["wrap-xs-".concat(String(R))],"stretch"!==m&&c["align-items-xs-".concat(String(m))],"stretch"!==a&&c["align-content-xs-".concat(String(a))],"flex-start"!==v&&c["justify-xs-".concat(String(v))],!1!==W&&c["grid-xs-".concat(String(W))],!1!==k&&c["grid-sm-".concat(String(k))],!1!==T&&c["grid-md-".concat(String(T))],!1!==E&&c["grid-lg-".concat(String(E))],!1!==I&&c["grid-xl-".concat(String(I))]);return r.createElement(p,(0,o.default)({className:U,ref:t},q))})),g=(0,m.default)(p,{name:"MuiGrid"})(u);t.default=g},4437:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(){return null};return function(t){return function(n,a,i,s,o){var r=o||a;return void 0===n[a]||n[t]?null:new Error("The prop `".concat(r,"` of ")+"`".concat(e,"` must be used on `").concat(t,"`."))}}}},4616:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),s=n(69),o=n.n(s),r=n(1098),l=n(1708),m=n(1695),c=n(4436),d=n.n(c),h=n(1744),p=n(1516),u=n(317),g=n(1126),f=n.n(g),C=n(4644),y=n(1166),b=n(4435),w=n.n(b),v=n(1712),x=n(4658),E=n(4668),M=n(4654),T=n(1547),S=n.n(T),k=n(1548),D=n.n(k),O=n(1109),A=n(4674),R=n(4678),$=n(4676),I=n(4677),N=n(4675);class W extends i.a.Component{handleRequestClose(e){const{callback:t}=this.props;e===W.Action.OK?t(!0):t(!1)}render(){const{title:e,message:t,labelCancel:n,labelOk:a,open:s,classes:o}=this.props;return i.a.createElement(A.a,{role:"alertdialog",open:s,onClose:this.handleRequestClose,className:o.dialogWrapper},i.a.createElement(R.a,null,e||i.a.createElement(u.a,{id:"Shared.ConfirmDialog.please.confirm",defaultMessage:"Please Confirm"})),i.a.createElement($.a,null,i.a.createElement(I.a,null,t||i.a.createElement(u.a,{id:"Shared.ConfirmDialog.please.confirm.sure",defaultMessage:"Are you sure?"}))),i.a.createElement(N.a,null,i.a.createElement(h.a,{onClick:()=>this.handleRequestClose(W.Action.CANCEL),color:"primary"},n||i.a.createElement(u.a,{id:"Shared.ConfirmDialog.cancel",defaultMessage:"Cancel"})),i.a.createElement(h.a,{onClick:()=>this.handleRequestClose(W.Action.OK),color:"primary",variant:"contained",className:o.deleteConformButton},a||i.a.createElement(u.a,{id:"Shared.ConfirmDialog.ok",defaultMessage:"OK"}))))}}W.propTypes={title:o.a.string.isRequired,message:o.a.string.isRequired,labelCancel:o.a.string.isRequired,labelOk:o.a.string.isRequired,callback:o.a.func.isRequired,open:o.a.bool.isRequired},W.Action={OK:"ok",CANCEL:"cancel"};var j=Object(r.a)(e=>({dialogWrapper:{"& span, & h5, & label, & td, & li, & div, & p":{color:e.palette.getContrastText(e.palette.background.paper)}},deleteConformButton:{"& span.MuiButton-label":{color:e.palette.getContrastText(e.palette.primary.main)}}}))(W),L=n(318),q=n(1702),U=n(1703),B=n(1710),_=n(2064);class P extends i.a.Component{constructor(e){super(e),this.state={commentText:"",category:"",currentLength:0},this.inputChange=this.inputChange.bind(this),this.handleCategoryChange=this.handleCategoryChange.bind(this),this.handleClickUpdateComment=this.handleClickUpdateComment.bind(this),this.handleClickCancel=this.handleClickCancel.bind(this),this.filterCommentToUpdate=this.filterCommentToUpdate.bind(this),this.filterCommentToUpdateReply=this.filterCommentToUpdateReply.bind(this)}componentDidMount(){const{comment:e}=this.props;this.setState({commentText:e.commentText,category:e.category,currentLength:e.commentText.length})}inputChange(e){let{target:t}=e;this.setState({commentText:t.value,currentLength:t.value.length})}handleClickCancel(){const{toggleShowEdit:e,commentsUpdate:t,allComments:n}=this.props;e(),t(n)}handleCategoryChange(e){this.setState({category:e.target.value})}filterCommentToUpdate(e){const{comment:t}=this.props;return e.commentId===t.commentId}filterCommentToUpdateReply(e){const{comment:t}=this.props;return e.commentId===t.parentCommentId}handleClickUpdateComment(){const{apiId:e,comment:t,allComments:n,toggleShowEdit:a,commentsUpdate:i,intl:s}=this.props,{category:o,commentText:r}=this.state,l=new L.a,m=t;m.commentText=r.trim(),m.category=o,t.commentText.replace(/\s/g,"").length?l.updateComment(e,m.commentId,m).then(e=>{const t=e.body;if(void 0===m.parentCommentId){const e=n.findIndex(this.filterCommentToUpdate);n[e].category=t.category,n[e].commentText=t.commentText}else{const e=n.findIndex(this.filterCommentToUpdateReply),a=n[e].replies.findIndex(this.filterCommentToUpdate);n[e].replies[a]=t}a(),i(n)}).catch(e=>{console.error(e),e.response?O.a.error(e.response.body.message):O.a.error(s.formatMessage({defaultMessage:"Something went wrong while adding the comment",id:"Apis.Details.Comments.CommentEdit.something.went.wrong"}))}):O.a.error(s.formatMessage({defaultMessage:"You cannot enter a blank comment",id:"Apis.Details.Comments.CommentEdit.blank.comment.error"}))}render(){const{classes:e,theme:t,intl:n}=this.props,{category:a,commentText:s,currentLength:o}=this.state;return i.a.createElement("div",null,i.a.createElement(U.a,{className:e.category},i.a.createElement(_.a,{value:a,onChange:this.handleCategoryChange},i.a.createElement(B.a,{value:"General"},i.a.createElement(u.a,{id:"Apis.Details.Comments.CommentEdit.general",defaultMessage:"General"})),i.a.createElement(B.a,{value:"Feature Request"},i.a.createElement(u.a,{id:"Apis.Details.Comments.CommentEdit.feature.request",defaultMessage:"Feature Request"})),i.a.createElement(B.a,{value:"Bug Report"},i.a.createElement(u.a,{id:"Apis.Details.Comments.CommentEdit.bug.report",defaultMessage:"Bug Report"})))),i.a.createElement(q.a,{id:"multiline-static",autoFocus:!0,multiline:!0,className:e.textField,margin:"normal",placeholder:n.formatMessage({defaultMessage:"Write a comment",id:"Apis.Details.Comments.CommentEdit.write.a.comment"}),inputProps:{maxLength:t.custom.maxCommentLength},value:s,onChange:this.inputChange}),i.a.createElement(m.a,{className:e.commentText,align:"right"},o+"/"+t.custom.maxCommentLength),i.a.createElement(E.a,{container:!0,spacing:1},i.a.createElement(E.a,{item:!0},i.a.createElement(h.a,{variant:"contained",color:"primary",onClick:()=>this.handleClickUpdateComment()},i.a.createElement(u.a,{id:"Apis.Details.Comments.CommentEdit.btn.save",defaultMessage:"Save"}))),i.a.createElement(E.a,{item:!0},i.a.createElement(h.a,{onClick:()=>this.handleClickCancel(),className:e.button},i.a.createElement(u.a,{id:"Apis.Details.Comments.CommentEdit.btn.cancel",defaultMessage:"Cancel"})))))}}P.defaultProps={commentsUpdate:null},P.propTypes={classes:o.a.instanceOf(Object).isRequired,apiId:o.a.string.isRequired,allComments:o.a.instanceOf(Array).isRequired,commentsUpdate:o.a.func,toggleShowEdit:o.a.func.isRequired,comment:o.a.instanceOf(Object).isRequired,intl:o.a.shape({formatMessage:o.a.func}).isRequired};var z=Object(u.d)(Object(r.a)(e=>({textField:{marginTop:0,width:"87.5%"},contentWrapper:{maxWidth:e.custom.contentAreaWidth,paddingLeft:e.spacing(2),paddingTop:e.spacing.unig,marginTop:e.spacing(2)},category:{width:"12%",marginRight:"0.5%"}}),{withTheme:!0})(P)),F=n(34);class Y extends i.a.Component{constructor(e){super(e),this.state={},this.showAddComment=this.showAddComment.bind(this),this.showEditComment=this.showEditComment.bind(this),this.handleClickOpen=this.handleClickOpen.bind(this)}showAddComment(e){const{showAddComment:t}=this.props;t(e)}showEditComment(e){const{editIndex:t,showEditComment:n}=this.props;-1===t&&n(e)}handleClickOpen(e){const{editIndex:t,handleClickOpen:n}=this.props;-1===t&&n(e)}displayDate(e){const t=new Date(e);return t.toLocaleDateString(void 0,{day:"numeric",month:"short",year:"numeric"})+" "+t.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"})}render(){const{classes:e,comment:t,editIndex:n,index:a,theme:s}=this.props,o=F.a.getUser(),r=o&&o.name,l=t.createdBy===r||o&&o.isAdmin();return i.a.createElement(E.a,{container:!0,className:e.verticalSpace,key:t.id},l&&[i.a.createElement(E.a,{item:!0,key:"key-delete"},i.a.createElement(h.a,{size:"small",className:-1===n?e.link:e.disable,onClick:()=>this.handleClickOpen(t),color:"primary","aria-label":"Delete comment "+t.content},i.a.createElement(u.a,{id:"Apis.Details.Comments.CommentOptions.delete",defaultMessage:"Delete"})))],null===t.parentCommentId&&F.a.getUser()&&[i.a.createElement(E.a,{item:!0,key:"key-reply"},i.a.createElement(h.a,{size:"small",className:e.link,onClick:()=>this.showAddComment(t.id),color:"primary","aria-label":"Reply to comment "+t.content},i.a.createElement(u.a,{id:"Apis.Details.Comments.CommentOptions.reply",defaultMessage:"Reply"})))])}}Y.defaultProps={showAddComment:null},Y.propTypes={classes:o.a.instanceOf(Object).isRequired,editIndex:o.a.number.isRequired,index:o.a.number.isRequired,comment:o.a.instanceOf(Object).isRequired,handleClickOpen:o.a.func.isRequired,showEditComment:o.a.func.isRequired,showAddComment:o.a.func};var H=Object(r.a)(e=>({link:{color:e.palette.getContrastText(e.palette.primary.main),"& span.MuiButton-label":{color:e.palette.primary.main,fontWeight:"400"},cursor:"pointer"},time:{color:e.palette.getContrastText(e.palette.background.default),marginTop:e.spacing(.3)},verticalSpace:{display:"flex",alignItems:"center"},disable:{color:e.palette.grey[200]},commentIcon:{color:e.palette.getContrastText(e.palette.background.default)},commentText:{color:e.palette.getContrastText(e.palette.background.default),marginTop:e.spacing.unig,width:"100%",whiteSpace:"pre-wrap",overflowWrap:"break-word"},root:{marginTop:e.spacing(2.5)},contentWrapper:{maxWidth:e.custom.contentAreaWidth,paddingLeft:e.spacing(2),paddingTop:e.spacing.unig}}),{withTheme:!0})(Y),G=n(1696);class J extends i.a.Component{constructor(e){var t,n,a;super(e),a=()=>{const{cancelCallback:e}=this.props;e?e():this.handleClickCancel(-1)},(n="handleCancel")in(t=this)?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,this.state={content:"",currentLength:0},this.inputChange=this.inputChange.bind(this),this.handleClickAddComment=this.handleClickAddComment.bind(this),this.handleClickCancel=this.handleClickCancel.bind(this),this.filterCommentToAddReply=this.filterCommentToAddReply.bind(this)}inputChange(e){let{target:t}=e;this.setState({content:t.value,currentLength:t.value.length})}handleClickCancel(){this.setState({content:""});const{handleShowReply:e}=this.props;e(-1)}filterCommentToAddReply(e){const{replyTo:t}=this.props;return e.id===t}handleClickAddComment(){const{apiId:e,intl:t,replyTo:n,handleShowReply:a,addComment:i,addReply:s}=this.props,{content:o}=this.state,r=new L.a,l={content:o.trim(),category:"general"};l.content.replace(/\s/g,"").length?r.addComment(e,l,n).then(e=>{this.setState({content:""}),null===n?i&&i(e.body):s&&s(e.body)}).catch(e=>{console.error(e),e.response&&e.response.body&&e.response.body.message?O.a.error(e.response.body.message):O.a.error(t.formatMessage({defaultMessage:"Something went wrong while adding the comment",id:"Apis.Details.Comments.CommentAdd.something.went.wrong"}))}):O.a.error(t.formatMessage({defaultMessage:"You cannot enter a blank comment",id:"Apis.Details.Comments.CommentAdd.error.blank.comment"})),this.setState({currentLength:0}),null!==n&&a()}render(){const{classes:e,cancelButton:t,theme:n,intl:a}=this.props,{content:s,currentLength:o}=this.state;return i.a.createElement(E.a,{container:!0,spacing:1,className:e.contentWrapper},i.a.createElement(E.a,{item:!0,xs:!0,zeroMinWidth:!0},i.a.createElement("div",{className:e.commentAddWrapper},i.a.createElement(G.a,{htmlFor:"standard-multiline-flexible"},i.a.createElement(u.a,{id:"Apis.Details.Comments.CommentAdd.write.comment.label",defaultMessage:"Write a comment"})),i.a.createElement(q.a,{id:"standard-multiline-flexible",autoFocus:!0,multiline:!0,rows:"4",className:e.textField,margin:"normal",placeholder:a.formatMessage({defaultMessage:"Write a comment",id:"Apis.Details.Comments.CommentAdd.write.comment.help"}),inputProps:{maxLength:n.custom.maxCommentLength},value:s,onChange:this.inputChange,variant:"outlined"}),i.a.createElement(m.a,{className:e.content,align:"right"},o+"/"+n.custom.maxCommentLength)),i.a.createElement(E.a,{container:!0,spacing:1},i.a.createElement(E.a,{item:!0},i.a.createElement(h.a,{variant:"contained",color:"primary",disabled:0===o,onClick:()=>this.handleClickAddComment(),className:e.commentAddButton},i.a.createElement(u.a,{id:"Apis.Details.Comments.CommentAdd.btn.add.comment",defaultMessage:"Comment"}))),t&&i.a.createElement(E.a,{item:!0},i.a.createElement(h.a,{onClick:this.handleCancel,className:e.button},i.a.createElement(u.a,{id:"Apis.Details.Comments.CommentAdd.btn.cancel",defaultMessage:"Cancel"}))))))}}J.defaultProps={replyTo:null,handleShowReply:null,commentsUpdate:null,cancelCallback:null},J.propTypes={classes:o.a.instanceOf(Object).isRequired,cancelButton:o.a.bool.isRequired,apiId:o.a.string.isRequired,replyTo:o.a.string,handleShowReply:o.a.func,commentsUpdate:o.a.func,allComments:o.a.instanceOf(Array).isRequired,intl:o.a.shape({formatMessage:o.a.func}).isRequired,cancelCallback:o.a.func};var K=Object(u.d)(Object(r.a)(e=>({commentIcon:{color:e.palette.getContrastText(e.palette.background.default)},content:{color:e.palette.getContrastText(e.palette.background.default)},contentWrapper:{maxWidth:e.custom.contentAreaWidth,paddingLeft:e.spacing(2),paddingTop:e.spacing(1),marginTop:e.spacing(2)},textField:{marginTop:0,marginRight:5,width:"100%"},commentAddWrapper:{display:"flex",alignItems:"top",flexFlow:"column","& label":{marginBottom:e.spacing(1)}},commentAddButton:{"& span.MuiButton-label":{color:e.palette.getContrastText(e.palette.primary.main)}}}),{withTheme:!0})(J));function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){Q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}S.a.extend(D.a);class X extends i.a.Component{constructor(e){super(e),this.state={openDialog:!1,replyId:-1,editIndex:-1,deleteComment:null},this.handleClickDeleteComment=this.handleClickDeleteComment.bind(this),this.handleShowEdit=this.handleShowEdit.bind(this),this.handleShowReply=this.handleShowReply.bind(this),this.handleClickOpen=this.handleClickOpen.bind(this),this.showAddComment=this.showAddComment.bind(this),this.showEditComment=this.showEditComment.bind(this),this.handleConfirmDialog=this.handleConfirmDialog.bind(this),this.handleClose=this.handleClose.bind(this),this.filterRemainingComments=this.filterRemainingComments.bind(this),this.filterCommentToDelete=this.filterCommentToDelete.bind(this),this.handleLoadMoreReplies=this.handleLoadMoreReplies.bind(this),this.handleAddReply=this.handleAddReply.bind(this),this.handleDeleteReply=this.handleDeleteReply.bind(this)}filterRemainingComments(e){const{deleteComment:t}=this.state;return e.id!==t.id}filterCommentToDelete(e){const{deleteComment:t}=this.state;return e.id===t.parentCommentId}showAddComment(e){this.setState({replyId:e})}showEditComment(e){const{editIndex:t}=this.state;-1===t&&this.setState({editIndex:e})}handleShowEdit(){this.setState({editIndex:-1})}handleShowReply(){this.setState({replyId:-1})}handleClickOpen(e){const{editIndex:t}=this.state;-1===t&&this.setState({deleteComment:e,openDialog:!0})}handleClose(){this.setState({openDialog:!1})}handleConfirmDialog(e){e?this.handleClickDeleteComment():this.handleClose()}handleClickDeleteComment(){const e=new L.a,{deleteComment:t}=this.state,{apiId:n,intl:a,onDeleteComment:i}=this.props,s=t.id,o=t.parentCommentId;this.handleClose(),e.deleteComment(n,s).then(()=>{null===o?(i&&i(s),O.a.info("Comment has been successfully deleted")):(this.handleDeleteReply(o,s),O.a.info("Reply comment has been successfully deleted"))}).catch(e=>{console.error(e),e.response?O.a.error(e.response.body.message):O.a.error(a.formatMessage({defaultMessage:"Something went wrong while deleting comment",id:"Apis.Details.Comments.Comment.something.went.wrong"})+" - "+s)})}handleLoadMoreReplies(e){const{apiId:t,comments:n,updateComment:a}=this.props,{id:i,replies:{count:s,list:o}}=e;(new L.a).getAllCommentReplies(t,i,3,s).then(e=>{if(e.body){const{list:t,count:r}=e.body,l=n.find(e=>e.id===i),m=o.concat(t),c=s+r,d=c<=3?3:c,h=Z(Z({},l),{},{replies:{count:c,list:m,pagination:Z(Z({},l.replies.pagination),{},{limit:d})}});a&&a(h)}}).catch(e=>{0})}handleDeleteReply(e,t){const{comments:n,updateComment:a,apiId:i}=this.props,s=n.find(t=>t.id===e),{replies:o}=s,r=o.list.filter(e=>e.id!==t),l=o.pagination.total-1,m=o.pagination.limit>l?l:o.pagination.limit,c=o.count-1;if(l>c){(new L.a).getAllCommentReplies(i,e,1,m-1).then(e=>{if(e.body){const t=Z(Z({},s),{},{replies:Z(Z({},o),{},{list:[...r,...e.body.list],pagination:Z(Z({},o.pagination),{},{total:l})})});a&&a(t)}}).catch(e=>{0})}else{const e=Z(Z({},s),{},{replies:Z(Z({},o),{},{count:c,list:r,pagination:Z(Z({},o.pagination),{},{limit:m,total:l})})});a&&a(e)}}handleAddReply(e){const{comments:t,updateComment:n}=this.props,{parentCommentId:a}=e,i=t.find(e=>e.id===a),{replies:s}=i,o=(s.count||0)+1,r=o<=3?3:o,l=Z(Z({},i),{},{replies:Z(Z({},s),{},{count:o,list:[...s.list,e],pagination:Z(Z({},s.pagination),{},{limit:r,offset:s.pagination.offset||0,total:s.pagination.total+1})})});n&&n(l)}render(){const{classes:e,comments:t,apiId:n,allComments:a,isOverview:s,crossTenentUser:o}=this.props,{editIndex:r,openDialog:l,replyId:c}=this.state;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:f()({[e.paper]:!s&&t.length>0},{[e.cleanBack]:s})},t&&t.slice(0).map((t,l)=>i.a.createElement("div",{key:t.id+"-"+l,className:f()({[e.contentWrapper]:!s},{[e.contentWrapperOverview]:s})},0!==l&&i.a.createElement(M.a,{className:e.divider}),i.a.createElement(E.a,{md:8,container:!0,spacing:1,className:f()({[e.root]:!s})},i.a.createElement(E.a,{item:!0},i.a.createElement(x.a,{className:e.commentIcon},"account_circle")),i.a.createElement(E.a,{item:!0,xs:!0,zeroMinWidth:!0},i.a.createElement(m.a,{noWrap:!0,className:e.commentText},t.commenterInfo&&t.commenterInfo.firstName?t.commenterInfo.firstName+t.commenterInfo.lastName:t.createdBy),i.a.createElement(v.a,{title:t.createdTime,"aria-label":t.createdTime},i.a.createElement(m.a,{noWrap:!0,className:e.commentText,variant:"caption"},S()(t.createdTime).fromNow())),i.a.createElement(m.a,{className:e.commentText},t.content),!o&&i.a.createElement(H,{comment:t,editIndex:r,index:l,showAddComment:this.showAddComment,handleClickOpen:this.handleClickOpen,showEditComment:this.showEditComment}),t.id===c&&i.a.createElement(p.a,{ml:6,mb:2},i.a.createElement(K,{apiId:n,replyTo:t.id,allComments:a,handleShowReply:this.handleShowReply,cancelButton:!0,addReply:this.handleAddReply})),t.replies&&t.replies.list.map((a,s)=>i.a.createElement(i.a.Fragment,null,i.a.createElement(p.a,{ml:8},0!==s&&i.a.createElement(M.a,{className:e.divider}),i.a.createElement(E.a,{container:!0,spacing:1,className:e.root},i.a.createElement(E.a,{item:!0},i.a.createElement(x.a,{className:e.commentIcon},"account_circle")),i.a.createElement(E.a,{item:!0,xs:!0,zeroMinWidth:!0},i.a.createElement(m.a,{noWrap:!0,className:e.commentText},a.commenterInfo&&a.commenterInfo.fullName?a.commenterInfo.fullName:a.createdBy),i.a.createElement(v.a,{title:t.createdTime,"aria-label":t.createdTime},i.a.createElement(m.a,{noWrap:!0,className:e.commentText,variant:"caption"},S()(a.createdTime).fromNow())),s!==r&&i.a.createElement(m.a,{className:e.commentText},a.content),s===r&&i.a.createElement(z,{apiId:n,allComments:a,comment:a,toggleShowEdit:this.handleShowEdit}),!o&&i.a.createElement(H,{comment:a,editIndex:r,index:s,showAddComment:this.showAddComment,handleClickOpen:this.handleClickOpen,showEditComment:this.showEditComment})))))),t.replies&&t.replies.count<t.replies.pagination.total&&i.a.createElement("div",{className:e.contentWrapper},i.a.createElement(E.a,{container:!0,spacing:4,className:e.root},i.a.createElement(E.a,{item:!0},i.a.createElement(m.a,{className:e.verticalSpace,variant:"body1"},i.a.createElement("a",{className:e.link+" "+e.loadMoreLink,onClick:()=>this.handleLoadMoreReplies(t),onKeyDown:()=>this.handleLoadMoreReplies(t)},i.a.createElement(u.a,{id:"Apis.Details.Comments.Comment.load.more.replies",defaultMessage:"Show More Replies"})))),i.a.createElement(E.a,{item:!0},i.a.createElement(m.a,{className:e.verticalSpace,zvariant:"body1"},"("+t.replies.count+" of "+t.replies.pagination.total+")"))))))))),i.a.createElement(j,{key:"key-dialog",labelCancel:"Cancel",title:"Confirm Delete",message:"Are you sure you want to delete this comment?",labelOk:"Yes",callback:this.handleConfirmDialog,open:l}))}}X.defaultProps={isOverview:!1},X.propTypes={classes:o.a.shape({}).isRequired,apiId:o.a.string.isRequired,allComments:o.a.instanceOf(Array).isRequired,comments:o.a.instanceOf(Array).isRequired,isOverview:o.a.bool,crossTenentUser:o.a.bool.isRequired,updateComment:o.a.func.isRequired};var ee=Object(u.d)(Object(r.a)(e=>({link:{color:e.palette.getContrastText(e.palette.background.default),cursor:"pointer"},commentIcon:{color:e.palette.getContrastText(e.palette.background.default)},commentText:{color:e.palette.getContrastText(e.palette.background.default),marginTop:0,width:"99%",whiteSpace:"pre-wrap",overflowWrap:"break-word",wordBreak:"break-all"},root:{marginTop:e.spacing(1)},contentWrapper:{paddingLeft:e.spacing(2),paddingTop:e.spacing(1)},contentWrapperOverview:{background:"transparent",width:"100%"},divider:{marginTop:e.spacing(2),marginBottom:e.spacing(2),width:"60%"},paper:{margin:0,marginTop:e.spacing(1),marginRight:e.spacing(3),paddingBottom:e.spacing(3)},cleanBack:{background:"transparent",width:"100%",boxShadow:"none"}}))(X)),te=n(1121);class ne extends a.Component{constructor(e){super(e),this.state={expanded:!0,allComments:null,comments:[],totalComments:0,apiId:null,showCommentAdd:!1},this.handleExpandClick=this.handleExpandClick.bind(this),this.handleLoadMoreComments=this.handleLoadMoreComments.bind(this),this.toggleCommentAdd=this.toggleCommentAdd.bind(this),this.addComment=this.addComment.bind(this),this.updateComment=this.updateComment.bind(this),this.onDeleteComment=this.onDeleteComment.bind(this)}componentDidMount(){let{apiId:e,theme:t,match:n,intl:a,isOverview:i,setCount:s}=this.props;n&&(e=n.params.apiUuid),this.setState({apiId:e});const o=new L.a,r=t.custom.commentsLimit;o.getAllComments(e,r,0).then(e=>{let t=e.body.list;i&&(s(t.length),t.length>2&&(t=t.slice(t.length-3,t.length))),this.setState({allComments:t,comments:t,totalComments:e.body.pagination.total})}).catch(e=>{0})}handleLoadMoreComments(){const{allComments:e,apiId:t,comments:n}=this.state,{theme:a}=this.props,i=new L.a,s=a.custom.commentsLimit,o=n.length;i.getAllComments(t,s,o).then(t=>{const n=e.concat(t.body.list);this.setState({allComments:n,comments:n})}).catch(e=>{0})}handleExpandClick(){const{expanded:e}=this.state;this.setState({expanded:!e})}addComment(e){const{totalComments:t,allComments:n}=this.state,{theme:{custom:{commentsLimit:a}}}=this.props,i=t+1;this.setState({allComments:[e,...n],totalComments:i,comments:[e,...n]})}updateComment(e){const{comments:t}=this.state,n=t.reduce((t,n)=>{let a=n;return n.id===e.id&&(a=e),[...t,a]},[]);this.setState({allComments:n,comments:n})}onDeleteComment(e){const{apiId:t,comments:n,totalComments:a}=this.state,i=n.filter(t=>t.id!==e),s=a-1;if(s>i.length){(new L.a).getAllComments(t,1,i.length).then(e=>{e.body&&this.setState({totalComments:s,comments:[...i,...e.body.list],allComments:[...i,...e.body.list]})}).catch(e=>{0})}else this.setState({totalComments:s,comments:i,allComments:i})}isCrossTenant(e,t){let n=null,a=null;const i=t.name;if(e.includes("@")){const t=e.split("@");n=t[t.length-1]}else n="carbon.super";if(i.includes("@")){const e=i.split("@");a=e[e.length-1]}else a="carbon.super";return n!==a}toggleCommentAdd(){this.setState(e=>({showCommentAdd:!e.showCommentAdd}))}render(){const{classes:e,isOverview:t}=this.props,{comments:n,allComments:a,totalComments:s,showCommentAdd:o}=this.state;return i.a.createElement(te.a.Consumer,null,r=>{let{api:c}=r;return i.a.createElement("div",{className:f()({[e.contentWrapper]:!t},{[e.contentWrapperOverview]:t})},!t&&i.a.createElement("div",{className:e.root},i.a.createElement(m.a,{variant:"h4",component:"h2",className:e.titleSub},s+" ",i.a.createElement(u.a,{id:"Apis.Details.Comments.title",defaultMessage:"Comments"}))),F.a.getUser()&&!this.isCrossTenant(c.provider,F.a.getUser())&&i.a.createElement(p.a,{mt:2,ml:1},!o&&i.a.createElement(h.a,{color:"primary",size:"small",className:e.button,startIcon:i.a.createElement(w.a,null),onClick:this.toggleCommentAdd},i.a.createElement(u.a,{id:"Apis.Details.Comments.write.a.new.comment",defaultMessage:"Write a New Comment"})),o&&i.a.createElement(K,{apiId:c.id,commentsUpdate:this.addComment,addComment:this.addComment,allComments:a,replyTo:null,cancelCallback:this.toggleCommentAdd,cancelButton:!0})),!a&&i.a.createElement(l.a,{className:e.paperProgress},i.a.createElement(C.a,{size:24})),a&&0===s&&i.a.createElement(p.a,{mt:2,mb:2,ml:1},i.a.createElement(y.a,{type:"info",title:i.a.createElement(u.a,{id:"Apis.Details.Comments.no.comments",defaultMessage:"No Comments Yet"})},i.a.createElement(m.a,{component:"p"},i.a.createElement(u.a,{id:"Apis.Details.Comments.no.comments.content",defaultMessage:"No comments available for this API yet"})))),i.a.createElement(ee,{comments:n,crossTenentUser:F.a.getUser()?this.isCrossTenant(c.provider,F.a.getUser()):null,apiId:c.id,allComments:a,onDeleteComment:this.onDeleteComment,updateComment:this.updateComment}),s>n.length&&i.a.createElement("div",{className:e.contentWrapper},i.a.createElement(d.a,{container:!0,spacing:4,className:e.root},i.a.createElement(d.a,{item:!0},i.a.createElement(m.a,{className:e.verticalSpace,variant:"body1"},i.a.createElement("a",{className:e.link+" "+e.loadMoreLink,onClick:this.handleLoadMoreComments},i.a.createElement(u.a,{id:"Apis.Details.Comments.load.previous.comments",defaultMessage:"Show More"})))),i.a.createElement(d.a,{item:!0},i.a.createElement(m.a,{className:e.verticalSpace,variant:"body1"},"("+n.length+" of "+s+")")))))})}}var ae,ie,se;ae=ne,ie="contextType",se=te.a,ie in ae?Object.defineProperty(ae,ie,{value:se,enumerable:!0,configurable:!0,writable:!0}):ae[ie]=se,ne.defaultProps={setCount:()=>{}},ne.propTypes={classes:o.a.instanceOf(Object).isRequired,setCount:o.a.func};t.default=Object(u.d)(Object(r.a)(e=>({root:{display:"flex",alignItems:"center",paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},paper:{marginRight:e.spacing(3),paddingBottom:e.spacing(3),paddingRight:e.spacing(2),"& span, & h5, & label, & td, & li, & div, & input":{color:e.palette.getContrastText(e.palette.background.paper)}},contentWrapper:{paddingLeft:e.spacing(3),marginTop:e.spacing(1)},contentWrapperOverview:{padding:0,width:"100%",boxShadow:"none"},titleSub:{cursor:"pointer",color:e.palette.getContrastText(e.palette.background.default)},link:{color:e.palette.getContrastText(e.palette.background.default),cursor:"pointer"},verticalSpace:{marginTop:e.spacing(.2)},loadMoreLink:{textDecoration:"none"},genericMessageWrapper:{marginTop:e.spacing(2),marginBottom:e.spacing(2),marginRight:e.spacing(3)},paperProgress:{padding:e.spacing(3),marginTop:e.spacing(2)},button:{textTransform:"capitalize"}}),{withTheme:!0})(ne))}}]);
//# sourceMappingURL=APIComments.51166b7e1c27ec00620b.bundle.js.map