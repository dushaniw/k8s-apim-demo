(this.webpackJsonp=this.webpackJsonp||[]).push([[18],{1817:function(e,t){},1819:function(e,t){},1820:function(e,t){},1821:function(e,t){},1831:function(e,t){},4065:function(e,t){},4066:function(e,t){},4290:function(e,t,a){var n={"./Range.js":1265,"./file.js":1367,"./getASTNodeAtPosition.js":1366,"./index.js":1305,"./validateWithCustomRules.js":1467};function s(e){var t=i(e);return a(t)}function i(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}s.keys=function(){return Object.keys(n)},s.resolve=i,e.exports=s,s.id=4290},4291:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=4291},4292:function(e,t,a){var n={"./Range.js":1265,"./file.js":1367,"./getASTNodeAtPosition.js":1366,"./index.js":1305,"./validateWithCustomRules.js":1467};function s(e){return Promise.resolve().then((function(){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a(n[e])}))}s.keys=function(){return Object.keys(n)},s.id=4292,e.exports=s},4293:function(e,t){function a(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=4293},4712:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return _}));var n=a(1),s=a.n(n),i=a(1708),o=a(69),r=a.n(o),l=a(4668),c=a(1695),u=a(317),p=a(1737),m=a(34),d=a(4658),f=a(1342),g=a.n(f),y=a(4042),h=a.n(y),E=a(4193),O=a.n(E),b=a(4327),S=a.n(b),j=(a(4328),a(1516)),x=a(1702),v=a(4330),T=a.n(v),C=a(4673),R=a(1121),N=a(318),P=a(4716),k=a(4681),w=a(4680),A=a(1769),L=a.n(A),U=a(1468),I=a.n(U),B=a(4654),D=a(1744),q=a(183);const G=Object(p.a)(e=>({root:{width:"100%"},title:{fontSize:e.typography.pxToRem(15),fontWeight:"bold",flexBasis:"50%",flexShrink:0,marginTop:e.spacing(2),marginBottom:e.spacing(2),marginLeft:e.spacing(4),marginRight:e.spacing(1)},heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular,flexBasis:"50%",flexShrink:0,marginTop:e.spacing(1),marginBottom:e.spacing(1)},column:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular,flexBasis:"33.33%",marginLeft:e.spacing(1)}}));function Q(e){const t=G(),{api:a}=Object(n.useContext)(R.a),{open:i,setOpen:o}=e,[r,l]=Object(n.useState)([]),[p,m]=Object(n.useState)(null);Object(n.useEffect)(()=>{const e=a.id;(new N.a).getGraphqlPoliciesComplexity(e).then(e=>{m(e.list);const t=[...new Set(e.list.map(e=>e.type))];l(t),0===e.list.length&&function(){const e=a.id;(new N.a).getGraphqlPoliciesComplexityTypes(e).then(e=>{const t=[];e.typeList.map(e=>(e.fieldList.map(a=>{const n={};return n.type=e.type,n.field=a,n.complexityValue=1,t.push(n),a}),t)),m(t);const a=[...new Set(t.map(e=>e.type))];l(a)})}()})},[]);return null===p?s.a.createElement(q.a,null):s.a.createElement(s.a.Fragment,null,s.a.createElement("div",null,s.a.createElement("div",{className:t.title,style:{display:"flex",position:"relative"}},s.a.createElement("div",null,s.a.createElement(u.a,{id:"Apis.Details.GraphQLConsole.QueryComplexityView.title",defaultMessage:"Custom Complexity Values"})),s.a.createElement(D.a,{size:"small",onClick:()=>{o(!i)}},s.a.createElement(L.a,null))),s.a.createElement(B.a,null),s.a.createElement("div",{className:t.root,style:{maxHeight:"740px",overflow:"scroll"}},s.a.createElement("div",null,r.map(e=>s.a.createElement(P.a,null,s.a.createElement(k.a,{expandIcon:s.a.createElement(I.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},s.a.createElement(c.a,{className:t.heading},e)),s.a.createElement(B.a,null),p.map(a=>a.type===e&&s.a.createElement(w.a,null,s.a.createElement("div",{className:t.column},a.field,":"),s.a.createElement("div",{className:t.column},a.complexityValue)))))))))}Q.propTypes={open:r.a.isRequired,setOpen:r.a.func.isRequired};const{buildSchema:z}=a(1128);function H(e){const{authorizationHeader:t,URLs:a,securitySchemeType:i,accessTokenProvider:o}=e,{api:r}=Object(n.useContext)(R.a),[l,c]=Object(n.useState)(null),[p,m]=Object(n.useState)(""),[d,f]=Object(n.useState)(!1),g=Object(n.useRef)(null),[y,h]=s.a.useState(!0);Object(n.useEffect)(()=>{const e=r.id;(new N.a).getGraphQLSchemaByAPIId(e).then(e=>{const t=z(e.data);c(t)})},[]);const E={},b=()=>{h(!y)},v=()=>{const e=!d;E.isExplorerOpen=e,f(e)};return null==={schema:l}?s.a.createElement(q.a,null):s.a.createElement(s.a.Fragment,null,s.a.createElement(j.a,{width:"30%",m:1},s.a.createElement(x.a,{label:s.a.createElement(u.a,{defaultMessage:"Gateway URLs",id:"Apis.Details.GraphQLConsole.GraphQLUI.URLs"}),value:a&&a.https,name:"selectedURL",fullWidth:!0,margin:"normal",variant:"outlined",InputProps:a&&a.https,disabled:!0})),s.a.createElement("div",null,s.a.createElement(j.a,{display:"flex"},s.a.createElement(j.a,{display:"flex"},s.a.createElement(C.a,{in:!y,timeout:"auto",unmountOnExit:!0},s.a.createElement(Q,{open:y,setOpen:h}))),s.a.createElement(j.a,{display:"flex",width:1},s.a.createElement(j.a,{display:"flex"},s.a.createElement(T.a,{schema:l,query:p,onEdit:m,explorerIsOpen:d,onToggleExplorer:v})),s.a.createElement(j.a,{display:"flex",height:"800px",flexGrow:1},s.a.createElement(O.a,{ref:g,fetcher:function(e){let n;return n="apikey"===t?o():"BASIC"===i?"Basic "+o():"Bearer "+o(),S()(a&&a.https,{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",[t]:n},body:JSON.stringify(e)}).then(e=>e.json())},schema:l,query:p,onEditQuery:m},s.a.createElement(O.a.Toolbar,null,s.a.createElement(O.a.Button,{onClick:()=>g.current.handlePrettifyQuery(),label:"Prettify",title:"Prettify Query (Shift-Ctrl-P)"}),s.a.createElement(O.a.Button,{onClick:()=>g.current.handleToggleHistory(),label:"History",title:"Show History"}),s.a.createElement(O.a.Button,{onClick:()=>f(!d),label:"Explorer",title:"Toggle Explorer"}),s.a.createElement(O.a.Button,{onClick:b,label:"Complexity Analysis",title:"View Field`s Complexity Values"}))))))))}H.propTypes={classes:r.a.shape({paper:r.a.string.isRequired}).isRequired};var K=a(1668);const M=Object(p.a)(e=>({buttonIcon:{marginRight:10},paper:{margin:e.spacing(1),padding:e.spacing(1)},grid:{marginTop:e.spacing(4),marginBottom:e.spacing(4),paddingRight:e.spacing(2),justifyContent:"center"},userNotificationPaper:{padding:e.spacing(2)},titleSub:{marginLeft:e.spacing(2),paddingTop:e.spacing(2),paddingBottom:e.spacing(2)}}));function _(){const e=M(),{api:t}=Object(n.useContext)(R.a),a=t.endpointURLs,[o,r]=Object(n.useState)(a.length>0?a[0].URLs:null),[p,f]=Object(n.useState)("OAUTH"),[y,E]=Object(n.useState)(!1),[O,b]=Object(n.useState)(""),[S,j]=Object(n.useState)(""),[x,v]=Object(n.useState)(),[T,C]=Object(n.useState)(),[P,k]=Object(n.useState)([]),[w,A]=Object(n.useState)(),[L,U]=Object(n.useState)(),[I,B]=Object(n.useState)("PRODUCTION"),[D,G]=Object(n.useState)(""),[Q,z]=Object(n.useState)(""),[_,F]=Object(n.useState)([]),W=m.a.getUser();function V(){let e;_.get(I)&&({accessToken:e}=_.get(I).token),"PRODUCTION"===I?A(e):U(e)}if(Object(n.useEffect)(()=>{const e=t.id;(new N.a).getAPIById(e).then(e=>{const t=e.obj;if(t.endpointURLs){const e=t.endpointURLs.map(e=>({name:e.environmentName,displayName:e.environmentDisplayName}));C(e)}if(t.scopes){const e=t.scopes.map(e=>e.name);k(e)}}).catch(e=>{const{status:t}=e;404===t&&E(!0)})},[]),null==t)return s.a.createElement(q.a,null);if(y)return"API Not found !";let J=!1,Y=t.authorizationHeader?t.authorizationHeader:"Authorization";t&&t.securityScheme&&(J=t.securityScheme.includes("api_key"),J&&"API-KEY"===p&&(Y="apikey"));const X=t.lifeCycleStatus&&"prototyped"===t.lifeCycleStatus.toLowerCase();return s.a.createElement(s.a.Fragment,null,s.a.createElement(c.a,{variant:"h4",className:e.titleSub},s.a.createElement(u.a,{id:"Apis.Details.GraphQLConsole.GraphQLConsole.title",defaultMessage:"Try Out"})),s.a.createElement(i.a,{className:e.paper},s.a.createElement(l.a,{container:!0,className:e.grid},!X&&!W&&s.a.createElement(l.a,{item:!0,md:6},s.a.createElement(i.a,{className:e.userNotificationPaper},s.a.createElement(c.a,{variant:"h5",component:"h3"},s.a.createElement(d.a,null,"warning")," ",s.a.createElement(u.a,{id:"notice",defaultMessage:"Notice"})),s.a.createElement(c.a,{component:"p"},s.a.createElement(u.a,{id:"api.console.require.access.token",defaultMessage:"You need an access token to try the API. Please log in and subscribe to the API to generate an access token. If you already have an access token, please provide it below."}))))),s.a.createElement(K.a,{setSecurityScheme:f,securitySchemeType:p,setSelectedEnvironment:v,selectedEnvironment:x,productionAccessToken:w,setProductionAccessToken:A,sandboxAccessToken:L,setSandboxAccessToken:U,environments:T,scopes:P,setUsername:b,setPassword:j,username:O,password:S,setSelectedKeyType:function(e,t){t?B(e,V):B(e)},convertToPostman:function(e,t){h.a.convert({type:"string",data:e},{},(e,a)=>{if(e)console.log(e);else{const e=t.https,n=a;n.output[0].data.variable[0].value=e;const s=n.output[0].data;g()(JSON.stringify(s),"postman collection"),console.log("Conversion success")}})},selectedKeyType:I,setKeys:F,setURLs:r,setProductionApiKey:z,setSandboxApiKey:G,productionApiKey:Q,sandboxApiKey:D,environmentObject:a,api:t})),s.a.createElement(i.a,{className:e.paper},s.a.createElement(H,{authorizationHeader:Y,URLs:o,securitySchemeType:p,accessTokenProvider:function(){if("BASIC"===p){return btoa(O+":"+S)}return"API-KEY"===p?"PRODUCTION"===I?Q:D:"PRODUCTION"===I?w:L}})))}_.propTypes={classes:r.a.shape({paper:r.a.string.isRequired,titleSub:r.a.string.isRequired,root:r.a.string.isRequired}).isRequired}}}]);
//# sourceMappingURL=GraphQLConsole.ef98946db6cffc563184.bundle.js.map